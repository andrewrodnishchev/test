image: python:3.8

stages:
  - test

test:
  stage: test
  script:
    - pip install -r requirements.txt
    - apt-get update && apt-get install -y wget unzip
    - wget https://chromedriver.storage.googleapis.com/134.0.5735.90/chromedriver_linux64.zip
    - unzip chromedriver_linux64.zip
    - mv chromedriver /usr/local/bin/
    - chmod +x /usr/local/bin/chromedriver
    - apt-get install -y chromium
    - pytest test.py
  variables:
    DISPLAY: ":99"
